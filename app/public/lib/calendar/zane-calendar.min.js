"use strict";var _createClass=function(){function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("zaneDate requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:void 0,function(u,t){t&&require("./zane-calendar.min.css"),(new Date).Format||(Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":12<this.getHours()?this.getHours()-12:this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t});var m=document,f="querySelector",d="querySelectorAll",o=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.config={elem:"#zane-calendar",type:"day",position:"fixed",lang:"cn",width:250,height:280,behindTop:10,format:"yyyy/MM/dd",value:"",min:"",max:"",event:"click",zindex:100,showtime:!1,showclean:!0,shownow:!0,showsubmit:!0,haveBotBtns:!0,calendarName:"",isDouble:!1,mounted:function(){},change:function(){},done:function(){}},this.config=this.extend(this.config,t),this.config.value||(this.config.value=""),this.config.min||(this.config.min=""),this.config.max||(this.config.max=""),this.init()}return _createClass(e,[{key:"generateCalendarObj",value:function(){this.obj={input:m[f](this.config.elem),calendar:null,id:"#zane-calendar-"+this.config.calendarName,$obj:null,fulldatas:{},$noDoubleObj:null,isDoubleOne:!1,handleType:"date",initVal:"",totalYear:18,cn:{weeks:["日","一","二","三","四","五","六"],time:["时","分","秒"],timeTips:"选择时间",startTime:"开始时间",endTime:"结束时间",dateTips:"返回日期",month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],tools:{confirm:"确定",clear:"清空",now:"现在"}},en:{weeks:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],timeTips:"Select Time",startTime:"Start Time",endTime:"End Time",dateTips:"Select Date",month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tools:{confirm:"Confirm",clear:"Clear",now:"Now"}}},this.vision="2.0.9",this.auther="zane",this.obj.lang=this.obj[this.config.lang],"year"!=this.config.type&&"month"!=this.config.type||(this.config.haveBotBtns=!1),"time"==this.config.type&&(this.config.showtime=!1),this.config.isDouble?"INPUT"!==this.obj.input.nodeName?this.obj.input.textContent=this.config.doublevalue:this.obj.input.value=this.config.doublevalue:this.config.isDouble||("INPUT"!==this.obj.input.nodeName?this.obj.input.textContent=this.config.value:this.obj.input.value=this.config.value)}},{key:"init",value:function(){var r=this;this.generateCalendarObj(),this.on(this.obj.input,this.config.event,function(t){t.preventDefault(),t.stopPropagation();var e=m[d](".zane-calendar");r.forEach(e,function(t,e){var a=e.getAttribute("id");("#"+a).replace(/DOUBLE/,"")!==r.obj.id.replace(/DOUBLE/,"")&&(a=a.replace("zane-calendar-",""),r.removeCalendar())});var a=m[f](r.obj.id);if(a&&(r.obj.calendar=a,r.$obj=a),r.obj.isDoubleOne=-1!=r.config.calendarName.indexOf("DOUBLE"),r.obj.isDoubleOne){var i=r.config.calendarName.replace(/DOUBLE/,"");r.obj.$noDoubleObj=u[i],u[i].obj.$noDoubleObj=r}var n=void 0;if(n="INPUT"===r.obj.input.nodeName?r.obj.input.value.trim():r.obj.input.textContent.trim())if(n=n.replace(/[\u4e00-\u9fa5]+/g,function(t,e){return"年"==t||"月"==t?"/":"时"==t||"分"==t?":":"秒"==t||"日"==t?"":void 0}),r.config.isDouble){var o=n.split("-"),s=o[1].trim(),l=o[0].trim();r.config.value=r.obj.isDoubleOne?s:l,r.config.begintime=l,r.config.endtime=s}else r.config.value=n;if(!m[f](r.obj.id)){var c=r.objHTML(),h=m.createElement("div");switch(h.innerHTML=c,m.body.appendChild(h),r.$obj=m[f](r.obj.id),r.config.type){case"day":r.judgeCalendarRender("day",r.config.value);break;case"year":r.getYearHtml(r.config.value);break;case"month":r.getMonthHtml(r.config.value);break;case"time":r.getTimeHtml(r.config.value)}r.elemEventPoint(t),r.documentClick(),r.calendarClick(),r.obj.initVal=r.obj.input.value}}),this.config.mounted&&this.config.mounted()}},{key:"objHTML",value:function(t){return'<div class="zane-calendar" style="width:'+this.config.width+"px;z-index:"+this.config.zindex+'" id="'+this.obj.id.substring(1)+'">\n\t\t\t\t\t<div class="zane-model-miss"><div class="zane-model-mask"></div><div class="zane-model-content"></div></div>\n\t\t\t\t\t<div class="zane-calendar-one left" style="width:'+this.config.width+'px;">\n\t\t\t\t\t\t<div class="zane-date-top">\n\t\t\t\t\t\t\t<div class="common-top top-check-day"></div>\n\t\t\t\t\t\t\t<div class="common-top top-check-year"></div>\t\n\t\t\t\t\t\t\t<div class="common-top top-check-month"></div>\t\n\t\t\t\t\t\t\t<div class="common-top top-check-time"></div>\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="zane-date-main" style="height:'+(this.config.height-80)+'px">\n\t\t\t\t\t\t\t<div class="common-main main-check-day"></div>\n\t\t\t\t\t\t\t<div class="common-main main-check-year"></div>\n\t\t\t\t\t\t\t<div class="common-main main-check-month"></div>\n\t\t\t\t\t\t\t<div class="common-main main-check-time"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="zane-date-bottom" style="display:'+(this.config.haveBotBtns||this.config.isDouble?"block":"none")+";\n\t\t\t\t\t\t\t\t\t\t\t\tborder-left:"+(this.obj.isDoubleOne?"none":"solid 1px #eee")+';">\n\t\t\t\t\t\t\t<div class="btn-select-time" style="display:'+(this.config.showtime?"blcok":"none")+'">\n\t\t\t\t\t\t\t\t<div class="zane-date-left button btn-select-time-item" onclick="'+this.config.calendarName+'.getTimeHtml()">'+this.obj.lang.timeTips+'</div>\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t \t\t\t<div class="zane-date-right">\n\t\t\t\t\t\t\t\t<div class="button '+(this.config.shownow?"no-right-line":"")+'" \n\t\t\t\t\t\t\t\t\tstyle="display:'+(this.config.showclean?"blcok":"none")+'"\n\t\t\t\t\t\t\t\t\tonclick="'+this.config.calendarName+'.cleanInputVal()">'+this.obj.lang.tools.clear+'</div>\n\t\t\t\t\t\t\t\t<div class="button '+(this.config.showsubmit?"no-right-line":"")+'"\n\t\t\t\t\t\t\t\t\tstyle="display:'+(this.config.shownow&&!this.config.min||this.config.shownow&&!this.config.max?"blcok":"none")+'" \n\t\t\t\t\t\t\t\t\tonclick="'+this.config.calendarName+'.changeToToday()">'+this.obj.lang.tools.now+'</div>\n\t\t\t\t\t\t\t\t<div class="button" \n\t\t\t\t\t\t\t\t\tstyle="display:'+(this.config.showsubmit?"blcok":"none")+'"\n\t\t\t\t\t\t\t\t\tonclick="'+this.config.calendarName+'.makeSureSelectTime()">'+this.obj.lang.tools.confirm+"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"}},{key:"topCheckDayHTML",value:function(t){var e='\t\n\t\t<div onclick="'+this.config.calendarName+".preMonth("+t.year+","+t.month+')" class="zane-date-icom zane-icon-left"></div>';return"cn"==this.config.lang?e+='<div class="zane-icon-center">\n\t\t\t\t<span onclick="'+this.config.calendarName+".getYearHtml("+t.year+')">'+t.year+'年</span>\n\t\t\t\t<span onclick="'+this.config.calendarName+".getMonthHtml("+t.month+')">'+t.month+"月</span>\n\t\t\t</div>":e+='<div class="zane-icon-center">\n\t\t\t\t<span onclick="'+this.config.calendarName+".getMonthHtml("+t.month+')">'+this.weekToEn(t.month)+'</span>\n\t\t\t\t<span onclick="'+this.config.calendarName+".getYearHtml("+t.year+')">'+t.year+"</span>\n\t\t\t</div>",e+='<div onclick="'+this.config.calendarName+".nextMonth("+t.year+","+t.month+')" class="zane-date-icom zane-icon-right"></div>'}},{key:"mainCheckDayHTML",value:function(t){for(var e='\n\t\t<div class="week-day"><table class="day" border="0" cellspacing="0">\n\t\t\t<tr>',a=0;a<7;a++)e+="<th>"+this.obj.lang.weeks[a]+"</th>";e+="</tr>";for(var i=0,n=t.datalist.length;i<n;i++){var o=t.datalist[i].class||"",s=t.datalist[i].sele_act||"";t.datalist[i].day===parseInt(t.today)&&"now"===t.datalist[i].daytype&&(o+=this.config.isDouble?" act_block":" active"),(""!=this.config.min&&new Date(t.datalist[i].fullday).getTime()<new Date(this.config.min).getTime()||""!=this.config.max&&new Date(t.datalist[i].fullday).getTime()>new Date(this.config.max).getTime())&&(o+=" calendar-disabled"),e+=0==i?'<tr><td data-time="'+t.datalist[i].fullday+'" class="'+o+" "+s+'"><span>'+t.datalist[i].day+"</span></td>":i==n-1?'<td data-time="'+t.datalist[i].fullday+'" class="'+o+" "+s+'"><span>'+t.datalist[i].day+"</span></td></tr>":(i+1)%7==0?'<td data-time="'+t.datalist[i].fullday+'" class="'+o+" "+s+'"><span>'+t.datalist[i].day+"</span></td></tr><tr>":'<td data-time="'+t.datalist[i].fullday+'" class="'+o+" "+s+'"><span>'+t.datalist[i].day+"</span></td>"}return e+="</table></div>"}},{key:"topCheckYearHTML",value:function(t){return'\n\t\t<div class="zane-date-icom zane-icon-left" onclick="'+this.config.calendarName+".perYear("+t.nowyear+')"></div>\n\t\t<div class="zane-icon-center">\n\t\t\t<span>'+t.firstYear+("cn"==this.config.lang?"年":"")+"</span>-\n\t\t\t<span>"+t.lastYear+("cn"==this.config.lang?"年":"")+'</span>\n\t\t</div>\n\t\t<div class="zane-date-icom zane-icon-right" onclick="'+this.config.calendarName+".nextYear("+t.nowyear+')"></div>'}},{key:"mainCheckYearHTML",value:function(t){for(var e='<div class="week-day">\n\t\t\t<table class="day border-day" border="0" cellspacing="0">',a=0,i=t.datalist.length;a<i;a++){var n=t.datalist[a].class||"";t.datalist[a].year===t.nowyear&&(n+=" active"),e+=0==a?'<tr><td class="'+n+'"><span data-year="'+t.datalist[a].year+'">'+t.datalist[a].year+"</span></td>":a==i-1?'<td class="'+n+'"><span data-year="'+t.datalist[a].year+'">'+t.datalist[a].year+"</span></td></tr>":(a+1)%3==0?'<td class="'+n+'"><span data-year="'+t.datalist[a].year+'">'+t.datalist[a].year+"</span></td></tr><tr>":'<td class="'+n+'"><span data-year="'+t.datalist[a].year+'">'+t.datalist[a].year+"</span></td>"}return e+="</table>\n\t\t</div>"}},{key:"topCheckMonthHTML",value:function(t){return'\n\t\t<div class="zane-date-icom zane-icon-left" style="display:'+("month"==this.obj.handleType?"none":"block")+'" onclick="'+this.config.calendarName+".perMonthYear("+t.year+","+t.nowmonth+')"></div>\n\t\t<div class="zane-icon-center">\n\t\t\t<span>'+t.year+'年</span>\n\t\t</div>\n\t\t<div class="zane-date-icom zane-icon-right" style="display:'+("month"==this.obj.handleType?"none":"block")+'" onclick="'+this.config.calendarName+".nextMonthYear("+t.year+","+t.nowmonth+')"></div>'}},{key:"mainCheckMonthHTML",value:function(t){for(var e='<div class="week-day">\n\t\t\t<table class="day border-day" border="0" cellspacing="0">',a=0,i=t.datalist.length;a<i;a++){var n=t.datalist[a].class||"";a+1===parseInt(t.nowmonth)&&(n+=" active"),e+=0==a?'<tr><td class="'+n+'"><span data-year="'+t.year+'" data-month="'+(a+1)+'">'+t.datalist[a]+"</span></td>":a==i-1?'<td class="'+n+'"><span data-year="'+t.year+'" data-month="'+(a+1)+'">'+t.datalist[a]+"</span></td></tr>":(a+1)%3==0?'<td class="'+n+'"><span data-year="'+t.year+'" data-month="'+(a+1)+'">'+t.datalist[a]+"</span></td></tr><tr>":'<td class="'+n+'"><span data-year="'+t.year+'" data-month="'+(a+1)+'">'+t.datalist[a]+"</span></td>"}return e+="</table>\n\t\t</div>"}},{key:"topCheckTimeHTML",value:function(){return'<div class="zane-icon-center"><span>'+this.obj.lang.timeTips+"</span></div>"}},{key:"mainCheckTimeHTML",value:function(t){for(var e='<div class="week-day"><ul class="nav"><li>'+this.obj.lang.time[0]+"</li><li>"+this.obj.lang.time[1]+"</li><li>"+this.obj.lang.time[2]+'</li></ul><div class="select-time">\n\t\t\t\t<ul class="hour">',a=0,i=t.hours.length;a<i;a++){var n="";t.hours[a]==t.hour&&(n="active"),e+='<li class="'+n+'" data-time="'+t.hours[a]+'">'+t.hours[a]+"</li>"}e+='</ul><ul class="minute">';for(var o=0,s=t.minutes.length;o<s;o++){var l="";t.minutes[o]==t.minute&&(l="active"),e+='<li class="'+l+'" data-time="'+t.minutes[o]+'">'+t.minutes[o]+"</li>"}e+='</ul><ul class="second">';for(var c=0,h=t.seconds.length;c<h;c++){var r="";t.seconds[c]==t.second&&(r="active"),e+='<li class="'+r+'" data-time="'+t.seconds[c]+'">'+t.seconds[c]+"</li>"}return e+="</ul></div></div>"}},{key:"bottomCheckTimeHTML",value:function(){var t="";return"time"===this.obj.handleType?t+='<div class="zane-date-left button" onclick="'+this.config.calendarName+'.backDateHtml()">'+this.obj.lang.dateTips+"</div>":t+='<div class="zane-date-left button" onclick="'+this.config.calendarName+'.getTimeHtml()">'+this.obj.lang.timeTips+"</div>",t}},{key:"elemEventPoint",value:function(t){var e=t.srcElement||t.target;this.obj.calendar=this.$obj;var a=e.getBoundingClientRect(),i=a.left,n=a.top,o=m.documentElement.clientWidth,s=m.documentElement.clientHeight,l=document.documentElement.scrollTop||u.pageYOffset||document.body.scrollTop,c=t.target.offsetHeight,h=s-(n+c+this.config.behindTop),r=o-i-this.config.width,d=this.$obj.offsetHeight;this.obj.calendar.style.display="block",this.obj.isDoubleOne&&r>=this.config.width?this.obj.calendar.style.left=i+this.config.width+"px":this.obj.calendar.style.left=i+"px",d<h?this.config.isDouble&&this.obj.isDoubleOne&&r<this.config.width?this.obj.calendar.style.top=n+l+c+this.config.behindTop+d-2-40+"px":this.obj.calendar.style.top=n+l+c+this.config.behindTop+"px":this.config.isDouble&&!this.obj.isDoubleOne&&r<this.config.width?this.obj.calendar.style.top=n+l-this.config.behindTop-2*d+42+"px":this.obj.calendar.style.top=n+l-this.config.behindTop-d+"px"}},{key:"getTimeDates",value:function(t,e){var a=this,i=[],n=t?new Date(t):new Date,o=n.getFullYear(),s=n.getMonth()+1,l=n.getDate(),c=(n.getDay(),n.getHours()),h=n.getMinutes(),r=n.getSeconds();this.config.isDouble&&this.obj.isDoubleOne&&"next"==e?12<s&&(o+=1,s=1):this.config.isDouble&&!this.obj.isDoubleOne&&"pre"==e&&s<1&&(o-=1,s=12),s=(s+"").length<2?"0"+s:s,l=(l+"").length<2?"0"+l:l,c=(c+"").length<2?"0"+c:c,h=(h+"").length<2?"0"+h:h,r=(r+"").length<2?"0"+r:r;var d=new Date(o,s,0).getDate(),u=new Date(o+"/"+s+"/1").getDay(),m=(new Date(o+"/"+s+"/"+d).getDay(),null);if(0<u){var f=new Date(o,s-1,0).getDate(),b=o,g=s-1;0===g&&(b=o-1,g=12);for(var y=0,v=u;y<v;y++){var p=f-y,j=b+"/"+(g=(g+"").length<2?"0"+g:g)+"/"+(p=(p+"").length<2?"0"+p:p),k=this.hasSelectAct(j,this.config.begintime,this.config.endtime)?"sele_act":"";i.push({day:f-y,week:v-1-y,class:"light",sele_act:k,daytype:"pre",fullday:j})}}i=i.reverse();for(var D=0,T=d;D<T;D++){var w=(u+D)%7,C=s,O=D+1,M=o+"/"+(C=(C+"").length<2?"0"+C:C)+"/"+(O=(O+"").length<2?"0"+O:O),H=this.hasSelectAct(M,this.config.begintime,this.config.endtime)?"sele_act":"";i.push({day:D+1,week:w,daytype:"now",sele_act:H,fullday:M}),D===T-1&&(m=w,D+1)}var x=42-i.length,$=o,E=parseInt(s)+1;13===E&&($=o+1,E=1);for(y=0;y<x;y++){var z=(m+1+y)%7,Y=y+1,N=$+"/"+(E=(E+"").length<2?"0"+E:E)+"/"+(Y=(Y+"").length<2?"0"+Y:Y),S=this.hasSelectAct(N,this.config.begintime,this.config.endtime)?"sele_act":"";i.push({day:y+1,week:z,class:"light",sele_act:S,daytype:"next",fullday:N})}return setTimeout(function(){a.config.begintime||a.config.endtime||a.setBeginEndTime(o+"/"+s+"/"+l)},1e3),{year:o,month:s,today:l,hour:c,minute:h,second:r,datalist:i}}},{key:"hasSelectAct",value:function(t,e,a){var i=!1;return this.config.isDouble&&this.config.begintime&&this.config.endtime&&(t="number"==typeof t?t:new Date(t).getTime(),e="number"==typeof e?e:new Date(e.replace(/-/g,"/")).getTime(),a="number"==typeof a?a:new Date(a.replace(/-/g,"/")).getTime(),e<=t&&t<=a&&(i=!0)),i}},{key:"preMonth",value:function(t,e){0==(e-=1)&&(e=12,t-=1);var a=this.obj.fulldatas.today,i=new Date(t,e,0).getDate();i<a&&(a=i);var n=t+"/"+e+"/"+a,o=!(!this.config.isDouble||!this.obj.isDoubleOne);this.setBeginEndTime(n),this.judgeCalendarRender("day",n,o,"pre")}},{key:"nextMonth",value:function(t,e){13==(e+=1)&&(t+=e=1);var a=this.obj.fulldatas.today,i=new Date(t,e,0).getDate();i<a&&(a=i);var n=t+"/"+e+"/"+a,o=!(!this.config.isDouble||this.obj.isDoubleOne);this.setBeginEndTime(n),this.judgeCalendarRender("day",n,o,"next")}},{key:"setBeginEndTime",value:function(t){this.config.isDouble&&(this.obj.isDoubleOne?(this.config.endtime=t,this.obj.$noDoubleObj.config.endtime=t):(this.config.begintime=t,this.obj.$noDoubleObj.config.begintime=t))}},{key:"getDay",value:function(){var s=this,t=this.$obj[f](".main-check-day")[d]("td");this.on(t,"click",function(t){var e="SPAN"==t.target.nodeName?t.target.parentNode:t.target;if(!s.hasClass(e,"calendar-disabled")){var a=this.getAttribute("data-time"),i=a.split("/"),n={year:i[0],month:i[1],today:i[2],hour:s.obj.fulldatas.hour,minute:s.obj.fulldatas.minute,second:s.obj.fulldatas.second};if(s.setBeginEndTime(a),s.config.isDouble)if(s.compareTimes("getDay",s.obj.$noDoubleObj.obj.fulldatas,n))return;if(s.obj.fulldatas.year=i[0],s.obj.fulldatas.month=i[1],s.obj.fulldatas.today=i[2],s.addOrRemoveClass(this),!s.config.showtime&&!s.config.isDouble){var o=s.obj.fulldatas.year+"/"+s.obj.fulldatas.month+"/"+s.obj.fulldatas.today;s.getYearMonthAndDay(o,!0)}}}),!this.config.isDouble&&this.on(t,"dblclick",function(t){var e="SPAN"==t.target.nodeName?t.target.parentNode:t.target;"dblclick"!==t.type||s.hasClass(e,"calendar-disabled")||s.makeSureSelectTime()})}},{key:"addOrRemoveClass",value:function(n){var o=this,t=this.$obj[f](".main-check-day")[d]("td");if(o.config.isDouble){var e=o.obj.$noDoubleObj.$obj[f](".main-check-day")[d]("td");o.forEach(t,function(t,e){var a=e.getAttribute("data-time"),i=o.hasSelectAct(a,o.config.begintime,o.config.endtime);n&&o.removeClass(e,"act_block"),i?o.hasClass(e,"sele_act")||o.addClass(e,"sele_act"):o.removeClass(e,"sele_act")}),o.forEach(e,function(t,e){var a=e.getAttribute("data-time");o.hasSelectAct(a,o.config.begintime,o.config.endtime)?o.hasClass(e,"sele_act")||o.addClass(e,"sele_act"):o.removeClass(e,"sele_act")}),n&&o.addClass(n,"act_block")}else n&&(o.forEach(t,function(t,e){o.removeClass(e,"active")}),o.addClass(n,"active"))}},{key:"compareTimes",value:function(t,e,a){var i=void 0,n=void 0,o=void 0;"getDay"===t?(i=e.year+"/"+e.month+"/"+e.today+" "+e.hour+":"+e.minute+":"+e.second,i=new Date(i).getTime(),n=a.year+"/"+a.month+"/"+a.today+" "+a.hour+":"+a.minute+":"+a.second,n=new Date(n).getTime(),o="cn"===this.config.lang?"结束时间必须大于开始时间！":"The end time must be greater than the start time."):"getYear"===t?(i=e.year,n=a.year,o="cn"===this.config.lang?"结束年份必须大于开始年份！":"The end year must be greater than the beginning year."):"getMonth"===t?(i=parseInt(e.month),n=parseInt(a.month),o="cn"===this.config.lang?"结束月份必须大于开始月份！":"The end month must be greater than the beginning month."):"selectTime"===t&&(i="2018/01/01 "+e.hour+":"+e.minute+":"+e.second,i=new Date(i).getTime(),n="2018/01/01 "+a.hour+":"+a.minute+":"+a.second,n=new Date(n).getTime(),o="cn"===this.config.lang?"结束时间必须大于开始时间！":"The end time must be greater than the start time.");var s=!1,l=this.config.showtime||this.obj.$noDoubleObj.config.showtime;(this.obj.isDoubleOne&&n<=i&&!l||this.obj.isDoubleOne&&n<i&&l)&&(s=!0),(!this.obj.isDoubleOne&&i<=n&&!l||!this.obj.isDoubleOne&&i<n&&l)&&(s=!0);var c=null;if(s){clearTimeout(c);var h=this.$obj[f](".zane-model-miss");h.style.display="block",this.$obj[f](".zane-model-content").innerHTML=o,c=setTimeout(function(){h.style.display="none"},1e3)}return s}},{key:"getYearHtml",value:function(t,e,a){t=t||(new Date).getFullYear(),t=parseInt(t),this.config.isDouble&&this.obj.isDoubleOne&&"next"==a?t+=this.obj.totalYear:this.config.isDouble&&!this.obj.isDoubleOne&&"pre"==a&&(t-=this.obj.totalYear);for(var i={nowyear:t,datalist:[]},n=0;n<this.obj.totalYear;n++){var o=t-Math.floor(this.obj.totalYear/2)+n;0===n&&(i.firstYear=o),n===this.obj.totalYear-1&&(i.lastYear=o),i.datalist.push({class:"",year:o})}this.obj.fulldatas.year=this.config.isDouble?i.nowyear:"",this.judgeCalendarRender("year",i,e,a)}},{key:"perYear",value:function(t){t-=this.obj.totalYear;var e=!(!this.config.isDouble||!this.obj.isDoubleOne);this.getYearHtml(t,e,"pre")}},{key:"nextYear",value:function(t){t+=this.obj.totalYear;var e=!(!this.config.isDouble||this.obj.isDoubleOne);this.getYearHtml(t,e,"next")}},{key:"getYear",value:function(){var n=this,o=this.$obj[f](".main-check-year")[d]("td");this.on(o,"click",function(t){var e="TD"===t.target.nodeName?t.target.children[0].getAttribute("data-year"):t.target.getAttribute("data-year"),a=e+"/"+n.obj.fulldatas.month+"/"+n.obj.fulldatas.today;if("year"===n.config.type){if(n.config.isDouble)if(n.compareTimes("getYear",n.obj.$noDoubleObj.obj.fulldatas,{year:e}))return;n.config.isDouble?n.obj.fulldatas.year=e:n.getYearMonthAndDay(e,!1)}else{var i=n.obj.isDoubleOne?"pre":"";n.setBeginEndTime(a),n.judgeCalendarRender("day",a,!0,i)}n.forEach(o,function(t,e){n.removeClass(e,"active")}),n.addClass(this,"active")})}},{key:"getMonthHtml",value:function(t){var e=new Date,a=this.obj.fulldatas.year||e.getFullYear(),i={nowmonth:t=t||e.getMonth()+1,year:a,datalist:this.obj.lang.month};this.obj.fulldatas.month=this.config.isDouble?i.nowmonth:"",this.judgeCalendarRender("month",i)}},{key:"perMonthYear",value:function(t,e){var a={nowmonth:e,year:t-1,datalist:this.obj.lang.month};this.judgeCalendarRender("month",a)}},{key:"nextMonthYear",value:function(t,e){var a={nowmonth:e,year:t+1,datalist:this.obj.lang.month};this.judgeCalendarRender("month",a)}},{key:"getMonth",value:function(){var s=this,l=this.$obj[f](".main-check-month")[d]("td");this.on(l,"click",function(t){var e="TD"===t.target.nodeName?t.target.children[0]:t.target,a=e.getAttribute("data-year"),i=e.getAttribute("data-month"),n=a+"/"+i+"/"+s.obj.fulldatas.today;if("month"===s.config.type){if(s.config.isDouble)if(s.compareTimes("getMonth",s.obj.$noDoubleObj.obj.fulldatas,{month:i}))return;s.config.isDouble?s.obj.fulldatas.month=i:s.getYearMonthAndDay(i,!1)}else{var o=s.obj.isDoubleOne?"pre":"";s.setBeginEndTime(n),s.judgeCalendarRender("day",n,!0,o)}s.forEach(l,function(t,e){s.removeClass(e,"active")}),s.addClass(this,"active")})}},{key:"getTimeHtml",value:function(t){this.config.isDouble&&!this.obj.isDoubleOne&&"day"==this.config.type&&this.obj.$noDoubleObj.getTimeHtml();var e=(new Date).Format("yyyy/MM/dd"),a=t?new Date(e+" "+t):new Date,i=a.getHours(),n=a.getMinutes(),o=a.getSeconds();i=(i+"").length<2?"0"+i:i,n=(n+"").length<2?"0"+n:n,o=(o+"").length<2?"0"+o:o,this.obj.fulldatas.hour=this.obj.fulldatas.hour||i,this.obj.fulldatas.minute=this.obj.fulldatas.minute||n,this.obj.fulldatas.second=this.obj.fulldatas.second||o;for(var s={hour:this.obj.fulldatas.hour,minute:this.obj.fulldatas.minute,second:this.obj.fulldatas.second,hours:[],minutes:[],seconds:[]},l=0;l<24;l++)l<10?s.hours.push("0"+l):s.hours.push(l+"");for(l=0;l<60;l++)l<10?(s.minutes.push("0"+l),s.seconds.push("0"+l)):(s.minutes.push(l+""),s.seconds.push(l+""));this.judgeCalendarRender("time",s)}},{key:"selectTime",value:function(){var a=this,e=this.$obj[f]("ul.hour")[d]("li"),i=this.$obj[f]("ul.minute")[d]("li"),n=this.$obj[f]("ul.second")[d]("li");this.on(e,"click",function(t){a.forEach(e,function(t,e){a.removeClass(e,"active")}),a.addClass(this,"active"),a.obj.fulldatas.hour=this.getAttribute("data-time")}),this.on(i,"click",function(t){a.forEach(i,function(t,e){a.removeClass(e,"active")}),a.addClass(this,"active"),a.obj.fulldatas.minute=this.getAttribute("data-time")}),this.on(n,"click",function(t){if(a.config.isDouble&&a.compareTimes("selectTime",a.obj.$noDoubleObj.obj.fulldatas,Object.assign({},a.obj.fulldatas,{second:this.getAttribute("data-time")})))return;a.forEach(n,function(t,e){a.removeClass(e,"active")}),a.addClass(this,"active"),a.obj.fulldatas.second=this.getAttribute("data-time")})}},{key:"backDateHtml",value:function(){this.config.isDouble&&!this.obj.isDoubleOne&&"day"==this.config.type&&this.obj.$noDoubleObj.backDateHtml(),this.obj.handleType="date";var t=this.bottomCheckTimeHTML();this.renderCommonHtml("day","","",t,!1)}},{key:"changeToToday",value:function(){var t=this.getTimeDates(),e=null,a=!0;e=this.config.showtime?t.year+"/"+t.month+"/"+t.today+" "+t.hour+":"+t.minute+":"+t.second:"time"==this.config.type?(a=!1,t.hour+":"+t.minute+":"+t.second):t.year+"/"+t.month+"/"+t.today,this.getYearMonthAndDay(e,a)}},{key:"cleanInputVal",value:function(){this.getYearMonthAndDay("",!1)}},{key:"makeSureSelectTime",value:function(){var t=null,e=!0;if(this.config.showtime)t=this.obj.fulldatas.year+"/"+this.obj.fulldatas.month+"/"+this.obj.fulldatas.today+" "+this.obj.fulldatas.hour+":"+this.obj.fulldatas.minute+":"+this.obj.fulldatas.second;else if("time"!=this.config.type||this.config.isDouble)if(this.config.isDouble){var a=this.obj.$noDoubleObj.obj.fulldatas,i=void 0,n=void 0;switch(this.config.type){case"day":n=this.obj.$noDoubleObj.config.showtime?(i=a.year+"/"+a.month+"/"+a.today+" "+a.hour+":"+a.minute+":"+a.second,this.obj.fulldatas.year+"/"+this.obj.fulldatas.month+"/"+this.obj.fulldatas.today+" "+this.obj.fulldatas.hour+":"+this.obj.fulldatas.minute+":"+this.obj.fulldatas.second):(i=a.year+"/"+a.month+"/"+a.today,this.obj.fulldatas.year+"/"+this.obj.fulldatas.month+"/"+this.obj.fulldatas.today);break;case"year":e=!1,i=""+a.year,n=""+this.obj.fulldatas.year;break;case"month":e=!1,i=""+a.month,n=""+this.obj.fulldatas.month;break;case"time":e=!1,i=a.hour+":"+a.minute+":"+a.second,n=this.obj.fulldatas.hour+":"+this.obj.fulldatas.minute+":"+this.obj.fulldatas.second}t=i+"|"+n}else t=this.obj.fulldatas.year+"/"+this.obj.fulldatas.month+"/"+this.obj.fulldatas.today;else e=!1,t=this.obj.fulldatas.hour+":"+this.obj.fulldatas.minute+":"+this.obj.fulldatas.second;this.getYearMonthAndDay(t,e)}},{key:"getYearMonthAndDay",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=null,i="",n="";if(t&&-1!=t.indexOf("|")){var o=t.split("|"),s=null,l=null;l=n=e?(s=i=new Date(o[0]).Format(this.config.format),new Date(o[1]).Format(this.config.format)):(s=i=o[0],o[1]),a=s+" - "+l}else a=i=e?new Date(t).Format(this.config.format):t;"INPUT"!==this.obj.input.nodeName?this.obj.input.textContent=a:this.obj.input.value=a,this.removeCalendar(),this.config.done&&this.config.done(a,i,n),this.obj.initVal!=a&&this.config.change&&this.config.change(a,i,n)}},{key:"judgeCalendarRender",value:function(t,e,a,i){var n=this,o=void 0,s=void 0,l=void 0;switch(t){case"day":this.obj.handleType="day";var c=this.getTimeDates(e,i);this.obj.fulldatas=c,this.compareSize(a,i),s=this.topCheckDayHTML(c),o=this.mainCheckDayHTML(c),this.renderCommonHtml("day",s,o),this.countHeight(".main-check-day",7),this.getDay(),setTimeout(function(){n.addOrRemoveClass()},200);break;case"year":this.obj.handleType="year",this.compareSize(a,i),o=this.mainCheckYearHTML(e),s=this.topCheckYearHTML(e),this.renderCommonHtml("year",s,o),this.countHeight(".main-check-year",6),this.getYear();break;case"month":this.obj.handleType="month",o=this.mainCheckMonthHTML(e),s=this.topCheckMonthHTML(e),this.renderCommonHtml("month",s,o),this.countHeight(".main-check-month",4),this.getMonth();break;case"time":this.obj.handleType="time",o=this.mainCheckTimeHTML(e),s=this.topCheckTimeHTML(),l=this.bottomCheckTimeHTML(),this.renderCommonHtml("time",s,o,l),this.$obj[f](".select-time").style.height=this.config.height-115+"px";var h=this.$obj[f]("ul.hour")[f]("li.active").offsetTop,r=this.$obj[f]("ul.minute")[f]("li.active").offsetTop,d=this.$obj[f]("ul.second")[f]("li.active").offsetTop;this.$obj[f]("ul.hour").scrollTop=h-150,this.$obj[f]("ul.minute").scrollTop=r-150,this.$obj[f]("ul.second").scrollTop=d-150,this.selectTime()}}},{key:"renderCommonHtml",value:function(t,e,a,i){var n=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];"time"!=t&&n||(this.$obj[f](".btn-select-time").innerHTML=i),n&&(this.$obj[f](".top-check-"+t).innerHTML=e,this.$obj[f](".main-check-"+t).innerHTML=a),this.showOrHide(this.$obj[d](".common-top"),"hide"),this.showOrHide(this.$obj[d](".common-main"),"hide"),this.$obj[f](".main-check-"+t).style.display="block",this.$obj[f](".top-check-"+t).style.display="block"}},{key:"compareSize",value:function(t,e){if(t){var a=this.obj.fulldatas,i=this.obj.$noDoubleObj;this.config.isDouble&&a&&i&&(i=i.obj.fulldatas,this.obj.isDoubleOne?this.getDoubleTime({prev:i,next:a,clickType:e}):this.getDoubleTime({prev:a,next:i,clickType:e}))}}},{key:"getDoubleTime",value:function(t){var e=void 0,a=void 0,i=void 0,n=void 0;switch(this.config.type){case"day":if(a=t.prev.year+"/"+t.prev.month+"/"+t.prev.today,e=t.next.year+"/"+t.next.month+"/"+t.next.today,i=new Date(a).getTime(),(n=new Date(e).getTime())-864e5<=i){var o=this.obj.isDoubleOne?n-864e5:i+864e5;this.obj.$noDoubleObj.setBeginEndTime(o),this.obj.$noDoubleObj.judgeCalendarRender("day",o,!1,t.clickType)}break;case"year":i=""+t.prev.year,(n=""+t.next.year)<=i&&this.obj.$noDoubleObj.getYearHtml(n,!1,t.clickType)}}},{key:"calendarClick",value:function(){this.on(this.obj.calendar,"click",function(t){t.preventDefault(),t.stopPropagation()})}},{key:"extend",value:function(t,e){return Object.assign(t,e)}},{key:"hasClass",value:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},{key:"addClass",value:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)}},{key:"removeClass",value:function(t,e){if(this.hasClass(t,e)){var a=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(a," ")}}},{key:"forEach",value:function(t,e){var a=void 0;if("function"!=typeof e)return this;if(t=t||[],"[object Object]"==Object.prototype.toString.call(t)){for(a in t)if(e.call(t[a],a,t[a]))break}else if("[object NodeList]"==Object.prototype.toString.call(t)||"[object Array]"==Object.prototype.toString.call(t))for(a=0;a<t.length&&!e.call(t[a],a,t[a]);a++);else e.call(t,0,t);return this}},{key:"on",value:function(t,a,i){return this.forEach(t,function(t,e){e.attachEvent?e.attachEvent("on"+a,function(t){t.target=t.srcElement,i.call(e,t)}):e.addEventListener(a,i,!1)})}},{key:"weekToEn",value:function(t){var e="string"==typeof t?parseInt(t):t;return this.obj.en.month[e-1]}},{key:"showOrHide",value:function(t,e){for(var a=0,i=t.length;a<i;a++)t[a].style.display="hide"===e?"none":"block"}},{key:"countHeight",value:function(t,e){var a=this.$obj[f](".zane-date-main").offsetHeight,i=this.$obj[f](t)[d]("tr"),n=Math.floor(a/e);this.forEach(i,function(t,e){e.style.height=n+"px"})}},{key:"documentClick",value:function(){var e=this;this.on(m,"click",function(t){e.removeCalendar()})}},{key:"removeCalendar",value:function(t){var e=m[d](".zane-calendar");e&&e.length&&e.forEach(function(t){var e=t.parentElement;e.parentElement.removeChild(e)})}}]),e}(),e=function(i){var t=void 0,e=void 0,a=void 0;function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=i.elem.substring(1);e=e.replace(/[_-]/g,"").toUpperCase(),i.calendarName=t&&t.double?e+t.double:e,i.width&&(i.width=i.width<220?220:i.width,i.width=500<i.width?500:i.width),i.height&&(i.height=i.height<240?240:i.height,i.height=350<i.height?350:i.height);var a=Object.assign(function t(e,a){a=a||{};for(var i in e)e.hasOwnProperty(i)&&("object"===_typeof(e[i])?(a[i]="[object Array]"===Object.prototype.toString.call(e[i])?[]:{},t(e[i],a[i])):a[i]=e[i]);return a}(i),t);u[i.calendarName]=new o(a)}a=i.format?i.format.replace(/-/g,"/"):"yyyy/MM/dd",i.type&&(-1!=i.type.indexOf("time")&&(a="HH:mm:ss"),-1!=i.type.indexOf("year")&&(a="yyyy"),-1!=i.type.indexOf("month")&&(a="MM")),i.type=i.type||"day",i.begintime&&"string"==typeof i.begintime?(t=i.begintime.replace(/-/g,"/"),(i.type&&-1==i.type.indexOf("time")||!i.type)&&(t=new Date(t).Format(a))):i.begintime&&"number"==typeof i.begintime&&(t=new Date(i.begintime).Format(a)),i.endtime&&"string"==typeof i.endtime?(e=i.endtime.replace(/-/g,"/"),(i.type&&-1==i.type.indexOf("time")||!i.type)&&(e=new Date(e).Format(a))):i.endtime&&"number"==typeof i.endtime&&(e=new Date(i.endtime).Format(a)),-1!=i.type.indexOf("double")?(i.type=i.type.replace(/double/,""),n({showclean:!1,shownow:!1,showsubmit:!1,isDouble:!0,value:t,format:a,doublevalue:t&&e?t+" - "+e:""}),n({shownow:!1,showtime:!1,isDouble:!0,double:"DOUBLE",value:e,format:a,doublevalue:t&&e?t+" - "+e:""})):n({format:a,value:t})};return t||(u.zaneDate=e),e});